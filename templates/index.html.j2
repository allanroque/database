<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>PG Health - {{ report.host }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css?v=1">
</head>
<body>
  <h1>PostgreSQL Health — {{ report.host }} <span class="badge">live</span></h1>
  <div class="muted">Coletado em {{ report.collected_at }}</div>

  <div class="grid" style="margin-top:12px">
    <div class="card">
      <h2>SO</h2>
      <div><b>Distro:</b> {{ report.os.distro }}</div>
      <div><b>Kernel:</b> {{ report.os.kernel }}</div>
      <div><b>Arch:</b> {{ report.os.arch }}</div>
      <div><b>Uptime:</b> {{ report.os.uptime }}</div>
      <div><b>Memória:</b> {{ report.os.mem_mb }} MB</div>
      <div><b>vCPUs:</b> {{ report.os.cpu_vcpus }}</div>
      <div><b>Mounts:</b> {{ report.os.mounts|join(', ') }}</div>
    </div>

    <div class="card">
      <h2>PostgreSQL (básico)</h2>
      <pre>{{ report.postgres.basics }}</pre>
    </div>

    <div class="card">
      <h2>Tamanho por DB</h2>
      <pre>{{ report.postgres.db_sizes }}</pre>
    </div>

    <div class="card">
      <h2>Erros recentes (log)</h2>
      <pre>{{ report.postgres.recent_errors or 'Sem erros recentes.' }}</pre>
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <h2>JSON cru</h2>
    <div class="muted">Disponível em <code>/pg-health/health.json</code></div>
    <pre>{{ report | to_nice_json }}</pre>
  </div>
</body>
</html>

